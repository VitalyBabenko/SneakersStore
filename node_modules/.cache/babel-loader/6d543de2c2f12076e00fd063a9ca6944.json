{"ast":null,"code":"import _objectSpread from\"/Users/Vitaliy/Desktop/web/react/sneakers/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/Vitaliy/Desktop/web/react/sneakers/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/Vitaliy/Desktop/web/react/sneakers/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Vitaliy/Desktop/web/react/sneakers/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/Vitaliy/Desktop/web/react/sneakers/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import Header from'./components/Header';import Drawer from'./components/Drawer';import React from'react';import{Route,Routes}from'react-router-dom';import Home from'./pages/Home';import Favorites from'./pages/Favorites';import AppContext from'./context';import Orders from'./pages/Orders';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),items=_React$useState2[0],setItems=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),cartItems=_React$useState4[0],setCartItems=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),favorites=_React$useState6[0],setFavorites=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),searchValue=_React$useState8[0],setSearchValue=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),cartOpened=_React$useState10[0],setCartOpened=_React$useState10[1];var _React$useState11=React.useState(true),_React$useState12=_slicedToArray(_React$useState11,2),isLoading=_React$useState12[0],setIsLoading=_React$useState12[1];var mockApi=\"https://6273f31a345e1821b224d416.mockapi.io/\";React.useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var cartResponse,favoritesResponse,itemsResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(mockApi,\"cart\"));case 3:cartResponse=_context.sent;setCartItems(cartResponse.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setCartItems([]);case 10:_context.prev=10;_context.next=13;return axios.get(\"\".concat(mockApi,\"favorites\"));case 13:favoritesResponse=_context.sent;setFavorites(favoritesResponse.data);_context.next=20;break;case 17:_context.prev=17;_context.t1=_context[\"catch\"](10);setFavorites([]);case 20:_context.next=22;return axios.get(\"\".concat(mockApi,\"items\"));case 22:itemsResponse=_context.sent;setIsLoading(false);setItems(itemsResponse.data);case 25:case\"end\":return _context.stop();}}},_callee,null,[[0,7],[10,17]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);// Add item to cart\nvar onAddToCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(obj){var findItem,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;findItem=cartItems.find(function(item){return Number(item.parentId)===Number(obj.id);});if(!findItem){_context2.next=8;break;}setCartItems(function(prev){return prev.filter(function(item){return Number(item.parentId)!==Number(obj.id);});});_context2.next=6;return axios.delete(\"\".concat(mockApi,\"cart/\").concat(findItem.id));case 6:_context2.next=14;break;case 8:setCartItems(function(prev){return[].concat(_toConsumableArray(prev),[obj]);});_context2.next=11;return axios.post(\"\".concat(mockApi,\"cart\"),obj);case 11:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setCartItems(function(prev){return prev.map(function(item){if(item.parentId===data.parentId){return _objectSpread(_objectSpread({},item),{},{id:data.id});}else{return item;}});});case 14:_context2.next=19;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](0);alert('Не уалось добавить в корзину');case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[0,16]]);}));return function onAddToCart(_x){return _ref.apply(this,arguments);};}();// Remove item from cart\nvar onRemoveItem=function onRemoveItem(id){try{axios.delete(\"\".concat(mockApi,\"cart/\").concat(id));setCartItems(function(prev){return prev.filter(function(item){return item.id!==id;});});}catch(error){alert('Не удалось уздалить из корзины');}};// Add / Remove like\nvar onAddToFavorite=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(obj){var _yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!favorites.find(function(favObj){return Number(favObj.id)===Number(obj.id);})){_context3.next=6;break;}axios.delete(\"\".concat(mockApi,\"favorites/\").concat(obj.id));setFavorites(function(prev){return prev.filter(function(item){return item.id!==obj.id;});});_context3.next=11;break;case 6:_context3.next=8;return axios.post(\"\".concat(mockApi,\"favorites\"),obj);case 8:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;setFavorites(function(prev){return[].concat(_toConsumableArray(prev),[data]);});case 11:_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);alert('Не удалось добавить в избранное');case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,13]]);}));return function onAddToFavorite(_x2){return _ref2.apply(this,arguments);};}();// Take input \nvar onChangeSearchInput=function onChangeSearchInput(event){setSearchValue(event.target.value);};var isItemAdded=function isItemAdded(id){return cartItems.some(function(obj){return Number(obj.parentId)===Number(id);});};return/*#__PURE__*/_jsx(AppContext.Provider,{value:{items:items,cartItems:cartItems,favorites:favorites,mockApi:mockApi,isLoading:isLoading,isItemAdded:isItemAdded,setCartOpened:setCartOpened,setCartItems:setCartItems,onAddToCart:onAddToCart},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper clear \",children:[/*#__PURE__*/_jsx(Drawer,{items:cartItems,onClose:function onClose(){return setCartOpened(false);},onRemove:onRemoveItem,mockApi:mockApi,opened:cartOpened}),/*#__PURE__*/_jsx(Header,{onClickCart:function onClickCart(){return setCartOpened(true);}}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{items:items,cartItems:cartItems,searchValue:searchValue,setSearchValue:setSearchValue,onChangeSearchInput:onChangeSearchInput,onAddToFavorite:onAddToFavorite,onAddToCart:onAddToCart,isLoading:isLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/favorites\",element:/*#__PURE__*/_jsx(Favorites,{onAddToFavorite:onAddToFavorite})}),/*#__PURE__*/_jsx(Route,{path:\"/orders\",element:/*#__PURE__*/_jsx(Orders,{mockApi:mockApi})})]})]})});}export default App;","map":{"version":3,"sources":["/Users/Vitaliy/Desktop/web/react/sneakers/src/App.js"],"names":["axios","Header","Drawer","React","Route","Routes","Home","Favorites","AppContext","Orders","App","useState","items","setItems","cartItems","setCartItems","favorites","setFavorites","searchValue","setSearchValue","cartOpened","setCartOpened","isLoading","setIsLoading","mockApi","useEffect","fetchData","get","cartResponse","data","favoritesResponse","itemsResponse","onAddToCart","obj","findItem","find","item","Number","parentId","id","prev","filter","delete","post","map","alert","onRemoveItem","error","onAddToFavorite","favObj","onChangeSearchInput","event","target","value","isItemAdded","some"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport Header from './components/Header'\nimport Drawer from './components/Drawer'\nimport React from 'react'\nimport { Route, Routes } from 'react-router-dom';\nimport Home from './pages/Home';\nimport Favorites from './pages/Favorites';\nimport AppContext from './context'\nimport Orders from './pages/Orders';\n\nfunction App() {\n  const [items, setItems] = React.useState([])\n  const [cartItems, setCartItems] = React.useState([])\n  const [favorites, setFavorites] = React.useState([])\n  const [searchValue, setSearchValue] = React.useState('')\n  const [cartOpened, setCartOpened] = React.useState(false)\n  const [isLoading, setIsLoading] = React.useState(true)\n\n  let mockApi = \"https://6273f31a345e1821b224d416.mockapi.io/\"\n\n  React.useEffect(() => {\n    async function fetchData() {\n      try {\n        const cartResponse = await axios.get(`${mockApi}cart`);\n        setCartItems(cartResponse.data);\n      } catch {\n        setCartItems([]);\n      }\n\n      try {\n        const favoritesResponse = await axios.get(`${mockApi}favorites`);\n        setFavorites(favoritesResponse.data);\n      } catch {\n        setFavorites([]);\n      }\n      const itemsResponse = await axios.get(`${mockApi}items`);\n      setIsLoading(false)\n      setItems(itemsResponse.data);\n    }\n    fetchData()\n  }, []);\n\n  // Add item to cart\n  const onAddToCart = async (obj) => {\n    try {\n      const findItem = cartItems.find((item) => Number(item.parentId) === Number(obj.id));\n      if (findItem) {\n        setCartItems(prev => prev.filter((item) => Number(item.parentId) !== Number(obj.id)));\n        await axios.delete(`${mockApi}cart/${findItem.id}`);\n      } else {\n        setCartItems((prev) => [...prev, obj]);\n        const { data } = await axios.post(`${mockApi}cart`, obj);\n        setCartItems((prev) => prev.map(item => {\n          if (item.parentId === data.parentId) {\n            return {\n              ...item,\n              id: data.id\n            }\n          } else {\n            return item\n          }\n        }));\n      }\n    } catch (error) {\n      alert('Не уалось добавить в корзину');\n    }\n  }\n\n  // Remove item from cart\n  const onRemoveItem = (id) => {\n    try {\n      axios.delete(`${mockApi}cart/${id}`);\n      setCartItems((prev) => prev.filter((item) => item.id !== id));\n    } catch (error) {\n      alert('Не удалось уздалить из корзины');\n    }\n  }\n\n  // Add / Remove like\n  const onAddToFavorite = async (obj) => {\n    try {\n      if (favorites.find((favObj) => Number(favObj.id) === Number(obj.id))) {\n        axios.delete(`${mockApi}favorites/${obj.id}`);\n        setFavorites((prev) => prev.filter((item) => item.id !== obj.id));\n      } else {\n        const { data } = await axios.post(`${mockApi}favorites`, obj);\n        setFavorites((prev) => [...prev, data])\n      }\n    } catch (error) {\n      alert('Не удалось добавить в избранное')\n    }\n  }\n\n  // Take input \n  const onChangeSearchInput = (event) => {\n    setSearchValue(event.target.value)\n  }\n\n  const isItemAdded = (id) => {\n    return cartItems.some((obj) => Number(obj.parentId) === Number(id));\n  }\n\n  return (\n    <AppContext.Provider\n      value={{\n        items,\n        cartItems,\n        favorites,\n        mockApi,\n        isLoading,\n        isItemAdded,\n        setCartOpened,\n        setCartItems,\n        onAddToCart\n      }}>\n\n      <div className=\"wrapper clear \">\n\n\n        <Drawer\n          items={cartItems}\n          onClose={() => setCartOpened(false)}\n          onRemove={onRemoveItem}\n          mockApi={mockApi}\n          opened={cartOpened}\n        />\n\n\n\n        <Header\n          onClickCart={() => setCartOpened(true)}\n        />\n\n        <Routes>\n\n          <Route path=\"/\" element={\n            <Home\n              items={items}\n              cartItems={cartItems}\n              searchValue={searchValue}\n              setSearchValue={setSearchValue}\n              onChangeSearchInput={onChangeSearchInput}\n              onAddToFavorite={onAddToFavorite}\n              onAddToCart={onAddToCart}\n              isLoading={isLoading}\n            />}\n          />\n\n          <Route path=\"/favorites\" element={\n            <Favorites\n              onAddToFavorite={onAddToFavorite}\n            />}\n          />\n\n          <Route path=\"/orders\" element={\n            <Orders\n              mockApi={mockApi}\n            />}\n          />\n\n\n        </Routes>\n      </div >\n    </AppContext.Provider>\n  )\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}